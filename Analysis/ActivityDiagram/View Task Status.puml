@startuml
title Activity Diagram: View Task Status
skinparam monochrome true
skinparam shadowing false

start

partition "User" {
  :1. Request task status (GET /api/tasks/{id});
}

partition "Status API" {
  :2. Receive request;
  :3. Validate Task ID format;
  if (4. ID valid?) then (Yes)
    :5. Fetch Task from DB;
  else (No)
    :5a. Return HTTP 400 (Bad Request);
    stop
  endif
}

partition "Database" {
  if (6. Task found?) then (Yes)
    :7. Load latest ExecutionRecord;
    :8. Load TaskClassification (if exists);
    :9. Load WorkerPrediction (if exists);
  else (No)
    :7a. Return HTTP 404 (Not Found);
    stop
  endif
}

partition "Status API" {
  :10. Build status response (state + details);
  :11. Return HTTP 200 + status payload;
}

note
TEXT DESCRIPTION (step-to-action mapping):
1) Step numbers in each action (e.g., "1.", "2.", ...) correspond to the written steps here.
2) Each written step corresponds to exactly one action in the diagram, in the same order.
end note

stop
@enduml
