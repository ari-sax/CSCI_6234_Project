@startuml
title Activity Diagram: Learn Results
skinparam monochrome true
skinparam shadowing false

start

partition "Feedback Observer" {
  :1. Detect task completion & collect FeedbackData;
  :2. Send feedback to Learning Engine;
}

partition "Learning Engine" {
  :3. Validate feedback integrity;
  if (4. Feedback valid?) then (Yes)
    :5. Extract training signals (features/labels);
  else (No)
    :5a. Discard feedback + log ErrorRecord;
    stop
  endif

  :6. Update training dataset / buffer;
  if (7. Retrain condition met?) then (Yes)
    :8. Retrain MLModel (classification/prediction);
    :9. Evaluate new model (accuracy/latency);
    if (10. Model improved?) then (Yes)
      :11. Publish updated model version;
    else (No)
      :11a. Keep current model version;
    endif
  else (No)
    :8a. Skip retraining (not enough data/time);
  endif
}

partition "Database" {
  :12. Persist LearningResult + model metrics;
}

note
TEXT DESCRIPTION (step-to-action mapping):
1) Step numbers in each action (e.g., "1.", "2.", ...) correspond to the written steps here.
2) Each written step corresponds to exactly one action in the diagram, in the same order.
end note

stop
@enduml
