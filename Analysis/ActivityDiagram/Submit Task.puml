@startuml
title Activity Diagram: Submit Task
skinparam monochrome true
skinparam shadowing false

start

partition "User" {
  :1. Prepare task parameters;
  :2. Submit task (POST /api/tasks);
}

partition "API Gateway" {
  :3. Receive request;
}

partition "Task Controller" {
  :4. Validate request payload;
  if (5. Request valid?) then (Yes)
    :6. Extract task metadata;
    :7. Generate unique Task ID;
  else (No)
    :6a. Log validation error;
    :7a. Return HTTP 400 (Bad Request);
    stop
  endif
}

partition "Database" {
  :8. Persist Task (status=PENDING);
}

partition "Task Queue" {
  :9. Enqueue Task for processing;
}

partition "Task Controller" {
  :10. Return HTTP 201 + Task ID;
}

note
TEXT DESCRIPTION (step-to-action mapping):
1) Step numbers in each action (e.g., "1.", "2.", ...) correspond to the written steps here.
2) Each written step corresponds to exactly one action in the diagram, in the same order.
end note

stop
@enduml
