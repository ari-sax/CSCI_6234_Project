@startuml
title Activity Diagram: Get System Metrics
skinparam monochrome true
skinparam shadowing false

start

partition "User/Admin" {
  :1. Request system metrics (GET /api/metrics);
}

partition "Metrics API" {
  :2. Receive request;
  :3. Validate authorization;
}

partition "Metrics Aggregator" {
  :4. Query task statistics (counts by status/type);
  :5. Query worker statistics (health/capacity);
  :6. Compute aggregate SystemMetrics (throughput, latency);
}

partition "Monitoring" {
  if (7. Metrics indicate anomaly?) then (Yes)
    :8. Create MonitoringAlert (severity based on anomaly);
  else (No)
    :8a. No alert created;
  endif
}

partition "Metrics API" {
  :9. Return metrics payload (HTTP 200);
}

note
TEXT DESCRIPTION (step-to-action mapping):
1) Step numbers in each action (e.g., "1.", "2.", ...) correspond to the written steps here.
2) Each written step corresponds to exactly one action in the diagram, in the same order.
end note

stop
@enduml
